<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Cellular Platformer</title>

  <!-- IMPORTANT: RELATIVE paths for GitHub Pages -->
  <link rel="stylesheet" href="./style.css" />

  <!-- Retro-ish font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

  <!-- Module script -->
  <script type="module" src="./main.js"></script>
</head>

<body>
  <div class="page">
    <header class="topbar">
      <div class="title">Cellular Platformer</div>
      <div class="controls">
        Move: &larr;/&rarr; or A/D · Jump: Space · Throw: F · Dash: Shift · Pause: Esc
      </div>
    </header>

    <main class="shell">
      <div class="frame" id="frame">
        <canvas id="game" width="1280" height="720"></canvas>

        <div class="overlayRoot" id="overlayRoot">

          <!-- BOOT / LOADING -->
          <div class="overlay overlay--show" id="bootOverlay">
            <div class="card">
              <div class="cardTitle">CELLULAR PLATFORMER</div>

              <!-- This text changes if JS is running -->
              <div class="cardSub" id="bootSub">Waiting for JavaScript…</div>

              <div class="progress">
                <div class="progressFill" id="bootBar"></div>
              </div>

              <div class="small" id="bootText">0%</div>

              <!-- Shows which file is currently loading -->
              <div class="small dim" id="bootFile">—</div>

              <div class="warn small" id="bootWarn" style="display:none;"></div>

              <div class="row">
                <button class="btn" id="bootStartBtn" disabled>START</button>
              </div>
              <div class="small dim">Assets must be in <b>/assets</b>.</div>
            </div>
          </div>

          <!-- CHARACTER SELECT -->
          <div class="overlay" id="charOverlay">
            <div class="card wide">
              <div class="cardTitle">CHOOSE YOUR CHARACTER</div>
              <div class="cardSub">Tutorial runs once on Level 1.</div>
              <div class="grid" id="charGrid"></div>
              <div class="row">
                <button class="btn" id="charStartBtn" disabled>START RUN</button>
              </div>
            </div>
          </div>

          <!-- PAUSE -->
          <div class="overlay" id="pauseOverlay">
            <div class="card">
              <div class="cardTitle">PAUSED</div>
              <div class="cardSub">Take a breath. The robots will wait.</div>
              <div class="row">
                <button class="btn" id="pauseResumeBtn">RESUME</button>
                <button class="btn btn--danger" id="pauseRestartBtn">RESTART LEVEL</button>
              </div>
              <div class="row">
                <button class="btn btn--ghost" id="pauseQuitBtn">QUIT RUN</button>
              </div>
              <div class="small dim">Restarting resets level + shop effects for this run.</div>
            </div>
          </div>

          <!-- CONFIRM -->
          <div class="overlay" id="confirmOverlay">
            <div class="card">
              <div class="cardTitle" id="confirmTitle">CONFIRM</div>
              <div class="cardSub" id="confirmMsg">Are you sure?</div>
              <div class="row">
                <button class="btn btn--danger" id="confirmYesBtn">YES</button>
                <button class="btn" id="confirmNoBtn">NO</button>
              </div>
            </div>
          </div>

          <!-- STAGE COMPLETE -->
          <div class="overlay" id="stageOverlay">
            <div class="card wide">
              <div class="cardTitle">STAGE COMPLETE</div>
              <div class="results">
                <div><span class="dim">Coins Collected:</span> <b id="rCoins">0</b></div>
                <div><span class="dim">Damage Taken:</span> <b id="rDmg">0</b></div>
                <div><span class="dim">Time:</span> <b id="rTime">0.0s</b></div>
              </div>
              <div class="row">
                <button class="btn" id="stageContinueBtn">CONTINUE</button>
              </div>
              <div class="small dim">Shop opens once after each stage.</div>
            </div>
          </div>

          <!-- SHOP -->
          <div class="overlay" id="shopOverlay">
            <div class="card wide">
              <div class="shopTop">
                <div class="shopLeft">
                  <img id="shopKeeperImg" class="avatar" alt="shopkeeper" />
                  <div>
                    <div class="cardTitle" style="margin:0;">SHOP</div>
                    <div class="small dim">Edgar: “Spend your coins wisely.”</div>
                  </div>
                </div>
                <div class="shopRight">
                  <div class="pill">Coins: <b id="shopCoins">0</b></div>
                </div>
              </div>

              <div class="shopList" id="shopList"></div>

              <div class="row">
                <button class="btn" id="shopDoneBtn">NEXT STAGE</button>
              </div>
              <div class="small dim">Shop effects are run-only. Death or Restart clears them.</div>
            </div>
          </div>

          <!-- NEXT STAGE LOADING -->
          <div class="overlay" id="nextOverlay">
            <div class="card">
              <div class="cardTitle">LOADING NEXT STAGE…</div>
              <div class="cardSub">Generating platforms + enemies</div>
              <div class="progress">
                <div class="progressFill" id="nextBar"></div>
              </div>
              <div class="small dim" id="nextText">0%</div>
            </div>
          </div>

          <!-- TUTORIAL -->
          <div class="hudBox" id="tutorialBox" style="display:none;">
            <div class="hudTitle">HOW TO PLAY</div>
            <label class="check"><input type="checkbox" id="tMove" /> Move (A/D or &larr;/&rarr;)</label>
            <label class="check"><input type="checkbox" id="tJump" /> Jump (Space)</label>
            <label class="check"><input type="checkbox" id="tThrow" /> Throw (F)</label>
            <div class="small dim">Complete all to hide this box.</div>
          </div>

        </div>
      </div>

      <div class="hudbar">
        <div class="pill">Level: <b id="hudLevel">1</b></div>
        <div class="pill">Coins: <b id="hudCoins">0</b></div>
        <div class="pill">Dash: <b id="hudDash">Locked</b></div>
        <div class="pill">Speed: <b id="hudSpeed">Normal</b></div>
        <div class="pill">Throw: <b id="hudThrow">Ready</b></div>
        <div class="pill right">HP: <b id="hudHP">10/10</b></div>
      </div>

      <footer class="footer">
        Made with HTML Canvas · Hosted on GitHub Pages
      </footer>
    </main>
  </div>

  <noscript>This game needs JavaScript enabled.</noscript>
</body>
</html>
